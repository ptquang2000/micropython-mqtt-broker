version: "3.9"

services:
  client1:
    container_name: client1
    image: client
    volumes:
      - ./client.py:/client/client.py
    command: python client.py mqtt
    network_mode: "host"
    extra_hosts:
      - "mqtt:127.24.0.4"
    environment:
    - PYTHONUNBUFFERED=1
  client2:
    container_name: client2
    image: client
    volumes:
      - ./client.py:/client/client.py
    command: python client.py mqtt
    network_mode: "host"
    extra_hosts:
      - "mqtt:127.24.0.4"
    environment:
    - PYTHONUNBUFFERED=1